{% extends "layout.njk" %}

{% block content %}
  {% if mode == "edit" %}
    <h2>Edit Post</h2>
  {% else %}
    <h2>New Post</h2>
  {% endif %}

  <form method="POST">
    <label for="title">Title</label>
    <input
      type="text"
      id="title"
      name="title"
      placeholder="Enter post title"
      required
      style="max-width: 400px;"
    >

    <label for="editor">Content</label>
    <div id="editor"></div>
    <input type="hidden" name="content" id="hiddenContent">

    <button type="submit" class="contrast">
      {% if mode == "edit" %}Update{% else %}Create{% endif %}
    </button>
  </form>

  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
  <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

<style>
  form {
    max-width: 600px;
    margin: 2rem auto;
    padding: 2rem;
    background: #16181d;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
  }

  form label {
    display: block;
    margin-bottom: 0.6rem;
    font-weight: 600;
  }

  form input[type="text"] {
    width: 100%;
    padding: 0.7rem 1rem;
    background: #1f222a;
    border: 1px solid #2c2f38;
    border-radius: 8px;
    color: #fff;
    font-size: 1rem;
    margin-bottom: 1.5rem;
    transition: border-color 0.2s ease;
  }

  form input[type="text"]:focus {
    outline: none;
    border-color: #007bff;
  }

  #editor {
    color: #fff;
    min-height: 150px;
    border: 1px solid #2c2f38;
    border-radius: 8px;
    background: #1f222a;
    margin-bottom: 1.5rem;
    overflow-y: auto;
  }

  .ql-toolbar {
    background: #1f222a;
    border: 1px solid #2c2f38;
    border-bottom: none;
    border-radius: 8px 8px 0 0;
  }

  .ql-container {
    border: 1px solid #2c2f38;
    border-radius: 0 0 8px 8px;
  }

  .ql-picker-label {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
  }

  .ql-picker-label svg {
    margin-left: 4px;
  }

  button.contrast {
    width: 100%;
    background: #007bff;
    color: #fff;
    border: none;
    padding: 0.8rem 1.5rem;
    border-radius: 8px;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.2s ease;
  }

  button.contrast:hover {
    background: #0066d3;
  }
</style>


  <script>
    const quill = new Quill("#editor", { theme: "snow" });
    const form = document.querySelector("form");
    form.addEventListener("submit", () => {
      document.getElementById("hiddenContent").value = quill.root.innerHTML;
    });
  </script>
{% endblock %}
